version: 2

models:
  - name: fct__associated_policy_eff_date
    description: 'Fact table linking associated policies to their effective dates. It joins `lkp__associated_policies` with `lkp__dates` to create a record for each policy-date combination, likely to facilitate time-series analysis on policy data.'
    columns:
      - name: final_associated_policy_key
        description: 'Key from `lkp__associated_policies.final_associated_policy_key`.'
      - name: policy_eff_date
        description: 'Effective date of the policy, likely from `lkp__associated_policies` or derived during its construction.'
      - name: input_date
        description: 'Date from `lkp__dates.input_date`, used for creating the policy-date combination.'
      - name: placeholder_column
        description: 'This is a placeholder. Describe other relevant columns from the join.'

  - name: fct__billing_activity
    description: 'Fact table for billing activities. It sources data from `stg__cur_cb` (current Cincibill staging model) and `lkp__dates`. It adds an `activity_transaction_key` for unique identification of billing transactions.'
    columns:
      - name: activity_transaction_key
        description: 'A unique key generated for each billing activity transaction.'
      - name: placeholder_policy_key
        description: 'This is a placeholder. Describe the policy key used (e.g., billing_sb_policy_key from stg__cur_cb).'
      - name: placeholder_date_column
        description: 'This is a placeholder. Describe the date column representing the activity date.'
      - name: placeholder_amount_column
        description: 'This is a placeholder. Describe columns representing amounts or other metrics of the billing activity.'

  - name: fct__prior_activity_dates
    description: "Fact table that captures prior billing activity relative to a policy's effective date. It joins `fct__associated_policy_eff_date` with `fct__billing_activity`. It uses the `make_n_prior_year_cols` macro to create columns for activity in N prior years and filters out activity not knowable at the policy effective date."
    columns:
      - name: final_associated_policy_key
        description: 'Key from `fct__associated_policy_eff_date.final_associated_policy_key`.'
      - name: policy_eff_date
        description: 'Policy effective date from `fct__associated_policy_eff_date.policy_eff_date`.'
      - name: activity_transaction_key
        description: 'Key from `fct__billing_activity.activity_transaction_key` for the prior activity.'
      - name: prior_year_activity_col_1
        description: 'This is a placeholder. Describe the column generated by `make_n_prior_year_cols` for 1st prior year activity.'
      - name: placeholder_column
        description: 'This is a placeholder. Describe other relevant columns from the join or generated by the macro.'
